{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"AutoArm for HomeAssistant","text":""},{"location":"#alarm-auto-arming","title":"Alarm Auto Arming","text":"<p>Automate the arming and disarming of the built-in Home Assistant Alarm Control Panel Integrations, with additional support for calendar integration, occupancy-driven arming and disarming, manual override via remote control buttons, and mobile push actionable notifications.</p> <p>Calendar, occupancy and diurnal scheduling available with zero YAML, everything configured from the Home Assistant settings. Advanced configuration for physical buttons, and fine-tuning for other scheduling, available from optional YAML configuration.</p> <p>Why use alarm control panels?</p> <p>A (virtual) Manual Control Panel is useful, even if there is no real alarm system, as a single central state of the home, and then use that to drive automations, notifications etc rather than littering notifications with checks for presence, time of day, vacations or similar.</p> <p>For example, it is likely that many things will change if <code>ARMED_VACATION</code> applies, and you may want to have all PIR alerts silenced if alarm state is <code>DISARMED</code>. This builds on how real alarm systems have worked for decades.</p> <p>One big obstacle to using Alarm Control Panel is having to remember to change the alarm panel state when people are in or out of the house, at night or when away on holiday. AutoArm solves that problem, and makes the Alarm Control Panel essential for any well-automated home.</p>"},{"location":"#setup","title":"Setup","text":"<p>AutoArm is one of the default repositories on HACS, so there's no need to register  a custom repo.</p> <p>Notifications will work with any HomeAssistant notification implementation, with additional support for Supernotify for multi-channel notifications with mobile actions.</p>"},{"location":"#configuration","title":"Configuration","text":"<p>AutoArm is set up using the Home Assistant Integrations page, with additional advanced configuration available via YAML.</p>"},{"location":"#ui-setup","title":"UI Setup","text":"<ol> <li>Go to Settings &gt; Devices &amp; Services &gt; Add Integration and search for AutoArm.</li> <li>Select your Alarm Control Panel entity (any Alarm Control Panel Integration will work). If you don't have one, see Create an Alarm Panel.</li> <li>Optionally select Calendar and Person entities.</li> <li>Adjust defaults in Options at any time (calendar entities, person entities, occupancy defaults, no-event mode).</li> </ol>"},{"location":"#yaml-for-advanced-features","title":"YAML for Advanced Features","text":"<p>Transitions, buttons, notifications, diurnal settings, rate limiting, and per-calendar overrides (state patterns, poll intervals) are configured in YAML. See Typical Configuration for a full example.</p> <p>Migrating from YAML-only</p> <p>Existing YAML configurations are automatically migrated to a config entry on restart. See Migration Guide for details.</p>"},{"location":"#automated-arming","title":"Automated Arming","text":"<p>See Automated Arming for the various mechanisms, options and how to configure.</p> <p>The full list of how alarm panel state can be set:</p> Source Description calendar Calendar events mobile Mobile action occupancy Occupancy calculation, e.g. automatically switching off <code>ARMED_AWAY</code> alarm_panel Changes made to Alarm Control Panel outside of AutoArm button A physical button push action A Home Assistant Action call (previously known as 'Service') sunrise HomeAssistant <code>sun</code> integration event sunset HomeAssistant <code>sun</code> integration event startup Alarm changes made as part of AutoArm startup zombification Home Assistant alarm panel got itself into a 'zombie' state and was reset"},{"location":"#throttling","title":"Throttling","text":"<p>To guard against loops, or other reasons why arming might be triggered too often, rate limiting is applied around the arm call, limited to a set number of calls within the past so many seconds. Configured by <code>rate_limit</code> section in config.</p>"},{"location":"#notifications","title":"Notifications","text":"<p>Notifications is set up via the integration settings.</p> <p></p> <p>Two notifications are sent:</p> <ul> <li>Alarm status has changed, by any means</li> <li>A button has been pressed, and the arm status will be actioned with a few seconds delay</li> </ul>"},{"location":"#advanced-notifications","title":"Advanced Notifications","text":"<p>More control over notifications is available using YAML configuration,</p> <p>The alarm status message by default uses a <code>quiet</code> profile, and another one called <code>normal</code>, which can be overridden with as many profiles named as you like. Each profile is defined by the source of alarm change, optionally restricted by which alarm states are involved, and lets you change the priority, or any of the other message content (the ubiquitous Home Assistant <code>data</code> section).</p> <pre><code>notify:\n    quiet:\n      scenario: nerdy\n      data:\n        priority: low\n    normal:\n      source:\n        - calendar\n      state:\n        - armed_vacation\n        - armed_away\n      data:\n        priority: medium\n</code></pre> <p>If you want to send to e-mail and mobile then this will fail with a notify group unless you use very basic messages, since additional fields, like the <code>actions</code> in the <code>data</code> field for Actionable Notifications aren't supported by other notification platforms. The best way to resolve that is with Supernotify which will tune each message for the underlying transport ( mobile apps, and also e-mail, text, chime etc.) along with lots of other tuning options and automatic discovery.</p>"},{"location":"#home-assistant-features-supported","title":"Home Assistant Features Supported","text":"<ul> <li>Alarm Control Panel Integrations</li> <li>Actionable Notifications</li> <li>Calendar Integration</li> <li>Sun Integration</li> <li>Person Integration</li> <li>Button Integration</li> <li>Device Tracker Integration</li> <li>Conditions</li> <li>Notifications</li> <li>Repairs<ul> <li>Raises repairs for invalid transition configurations</li> </ul> </li> <li>Developer Tools<ul> <li>Configurable integration with UI config flow and options</li> <li>Reloadable from the YAML tab</li> <li>Exposes entities for its configuration and last calendar event.</li> </ul> </li> </ul>"},{"location":"#references","title":"References","text":"<ul> <li>Home Assistant Calendar Integration</li> <li>Home Assistant Manual Control Panel docs for more info.</li> <li>Handy Dashboard Alarm Panel widget to add to your Home Assistant dashboard.</li> </ul>"},{"location":"automated_arming/","title":"Automated Arming","text":"<p>Arming has several complementary modes of operation, that can be selected and mixed as you need.</p> <p>Mobile Actions, Buttons and Alarm Panel changes are classed as Manual Interventions, and won't be overridden back by AutoArm unless there's an occupancy change or other manual intervention.</p>"},{"location":"automated_arming/#alarm-panel-control","title":"Alarm Panel Control","text":"<p>AutoArm listens for changes to the Alarm Control Panel from other sources, like the Home Assistant mobile companion app or other automations, with AutoArm respecting the selected new state, and applying the same Manual Intervention controls for further state changes.</p>"},{"location":"automated_arming/#voice-assistants","title":"Voice Assistants","text":"<p>The Home Assistant Alarm Control Panel can also be exposed to a Voice Assistant, so disarm or arm by talking to Alexa or similar. Use the Settings-&gt;Voice Assistants page in Home Assistant to do this.</p> <p>Alexa has additional controls to prevent unauthorized disarming ( otherwise burgulars could shout through the letterbox! ), see Connect Your Home Security System to Echo Hub on the Amazon documentation.</p>"},{"location":"automated_arming/#physical-button-control","title":"Physical Button Control","text":"<p>Handy if you have a Zigbee, 433Mhz or similar button panel by the door - choose one of the Button Integrations entities for <code>DISARMED</code>,<code>ARMED_AWAY</code> etc, or a Reset button to set the panel by the default algorithm.</p> <p>A delay can be set, so if for example you have an away button next to the front door, you can give yourself a couple of minutes to exit the property before the alarm is set.</p> <p>See also the Manual MQTT Alarm Control Panel for another way to integrate physical buttons to control state.</p> <p></p> <p>Example Cheap 433Mhz Buttons Using RFLink</p>"},{"location":"automated_arming/#mobile-action-control","title":"Mobile Action Control","text":"<p>This works similar to the buttons, except its driven by Actionable Notifications. See Mobile Actions for more information, and the Contextual Mobile Actions Recipe for a nice way to do this in Supernotify where only the appropriate actions are shown.</p> <p>These can be added to any notification, so for example noisy PIR alerts can be quickly squelched by disarming the alarm.</p>"},{"location":"automated_arming/#home-assistant-action","title":"Home Assistant Action","text":"<p>An action (aka \"service\") called <code>autoarm.reset_state</code> can be used to trigger a state reset. It will work the same way as other resets, such as at sunrise or sunset.</p>"},{"location":"automated_arming/#calendar-control","title":"Calendar Control","text":"<p>Configuration split</p> <p>Calendar entities and <code>no_event_mode</code> are configured via the AutoArm Options UI. Per-calendar <code>state_patterns</code> and <code>poll_interval</code> remain in YAML.</p>"},{"location":"automated_arming/#integrating-a-calendar","title":"Integrating a Calendar","text":"<p>Use a Home Assistant calendar integration to define when and how to arm the control panel. If you don't have one, follow these instructions.</p> <p>Using a Remote Calendar, Google Calendar or similar also means that alarm scheduling can be done remotely, even if you have no remote access to Home Assistant.</p> <p>Multiple calendars, of different types, can be configured, and specific alarm states / match patterns per calendar. See the example configuration</p>"},{"location":"automated_arming/#recurring-state","title":"Recurring State","text":"<p>Armed or disarmed state can be configured with an entry for that purpose, for example a recurring entry on a Local Calendar dedicated to AutoArm, or looking up an existing calendar to find vacations by pattern.</p> <p>If there's no calendar event live, then arming state can fall back to [Diurnal Control], or fixed at a default state, or left to manual control.</p>"},{"location":"automated_arming/#diurnal-control","title":"Diurnal Control","text":"<p>This does three things to support [Automated Transitions]:</p> <ol> <li>Re-evaluate the alarm state at sunrise<ul> <li>There's a <code>earliest</code> and <code>latest</code> cutoff option in the UI config to stop alarm being disarmed at 4am if you live far North, like Canada or Scotland.</li> <li>The cutoffs for sunrise can be set to the same time to override the <code>sun</code> integration altogeher for sunsrise</li> </ul> </li> <li>Re-evaluate the alarm state at sunset<ul> <li>There's a <code>earliest</code> and <code>latest</code> cutoff option in the UI config, which works identically to that for sunrise</li> </ul> </li> <li>Provide a <code>day</code> and <code>night</code> value for conditions</li> </ol> <p></p>"},{"location":"automated_arming/#occupancy-control","title":"Occupancy Control","text":"<p>Configuration split</p> <p>Person entities and occupancy <code>default_state</code> are configured via the AutoArm Options UI. The <code>delay_time</code> setting remains in YAML.</p> <p>The people who live at the property can be defined as Person Integration entities Person Entities in the <code>occupancy</code> configuration, and used to derive an <code>occupied</code> value for [Automated Transitions]. This works best with the Companion App on a mobile phone, although other Device Tracker Integrations can work, such as a home network <code>device_tracker</code>.</p> <p>Tip</p> <p>Since the occupied check looks for entities that have a state <code>home</code>, it doesn't have to be <code>person</code> entities, and you can add a list of <code>device tracker</code> entities. The advantage of Person is that you can define multiple trackers for a single individual, and they are <code>home</code> if any of the trackers are <code>home</code>, even if some of them haven't kept up.</p> <p>See the Presence Detection guidance from Home Assistant on how to set this up, and the options for using it.</p> <p>If the house is occupied, and its daytime, some people like that to be <code>disarmed</code> and others prefer <code>armed_home</code>. You can control this via Calendar Control or use the <code>state_default</code> settings for day and/or night in the <code>occupancy</code> configuration.</p> <p>One problem with device trackers is that they can be noisy, for example if someone tracked by phone walks out of wifi range, or reboots their device. This tends to be a problem when building occupied, since its much less likely for a device tracker to intermittenly think the device is at home. A delay timer can be set, separately for <code>home</code> and <code>not_home</code>, to smooth this out, so alarm won't reset unless someone still out a few minutes later.</p> <p>In this configuration, there will be a three minute wait to make sure the device tracker stable for <code>home</code>-&gt;<code>not_home</code>, and zero delay when arriving home.</p> <pre><code>  occupancy:\n    entity_id:\n      - person.house_owner\n      - person.tenant\n    default_state:\n      day: disarmed\n      night: armed_night\n    delay_time:\n      not_home: 180\n</code></pre>"},{"location":"automated_arming/#automated-transitions","title":"Automated Transitions","text":"<p>YAML-only</p> <p>Transition conditions are configured entirely in YAML.</p> <p>If nothing else is configured ( occupancy, buttons, calendars ) then arming will still happen by the state of the sun. The rules for this, and how occupancy is used, are all defined as Home Assistant Conditions and can be overridden as you need.</p> Diurnal State Occupancy State Alarm State day occupied ARMED_HOME(*) day empty ARMED_AWAY night occupied ARMED_NIGHT night occupied ARMED_AWAY <p>(*) This can be overridden using <code>state_default</code> in the <code>occupancy</code> configuration, for example if you prefer to have the alarm set to <code>disarmed</code> when people are home and its daylight.</p> <p>Two other states, <code>armed_vacation</code> and <code>disarmed</code> can be set manually, by buttons, or calendar.</p> <p>If you need more predictability, especially for high latitudes where sunrise varies wildly through the year, set up a calendar and define exactly when you want disarming or arming to happen.</p>"},{"location":"automated_arming/#algorithm-conditions","title":"Algorithm Conditions","text":"<p>The defaults below will be used if there is no transition defined ( you can override just one of them if you prefer, and the others will remain as default, leave <code>conditions</code> empty if you really want to disable the transition).</p> <pre><code>autoarm:\n  transitions:\n    armed_home:\n        - \"{{ autoarm.occupied and not autoarm.night }}\"\n        - \"{{ autoarm.computed and autoarm.occupied_daytime_state == 'armed_home'}}\"\n    armed_away: \"{{ not autoarm.occupied and autoarm.computed}}\"\n    disarmed:\n        - \"{{ autoarm.occupied and not autoarm.night }}\"\n        -  \"{{ autoarm.computed and autoarm.occupied_daytime_state == 'disarmed'}}\"\n    armed_night: \"{{ autoarm.occupied and autoarm.night and autoarm.computed}}\"\n    armed_vacation: \"{{ autoarm.vacation }}\"\n</code></pre> <p>Conditions have an <code>autoarm</code> field added to the context, with these values. The examples above are all in the shortcut template style, though any other style of <code>condition</code> can be used, along with other Jinja2 features and Home Assistant extras, including AND/OR/NOT logic.</p> Field Type Usage daytime bool The <code>sun</code> integration thinks it is daytime night bool The <code>sun</code> integration thinks it is nighttime occupied bool If any of the <code>person</code> entities have state <code>home</code> at_home list[str] List of occupancy entities at home not_home list[str] List of occupancy entities not at home manual bool Alarm Panel is in vacation or 'custom bypass' mode computed bool State is being computed by the algorithm vacation bool Shortcut for Alarm Panel state being ARMED_VACATION bypass bool Shortcut for Alarm Panel state being ARMED_CUSTOM_BYPASS disarmed bool Shortcut for Alarm Panel state being DISARMED state str Current alarm control panel state calendar_event CalendarEvent Most recent active Calendar Event calendar_event.start datetime Event start date/time calendar_event.end datetime Event end date/time calendar_event.summary str Event summary calendar_event.description str Event description calendar_event.location str Event location occupied_daytime_state str Default state for occupied in day time"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#100","title":"1.0.0","text":""},{"location":"changelog/#configuration","title":"Configuration","text":"<ul> <li>The basic setup, along with calendars, occupancy and some tuning is now UI based using Home Assistant ConfigFlow and ConfigEntry, with automated migration of existing YAML config</li> </ul>"},{"location":"changelog/#occupancy","title":"Occupancy","text":"<ul> <li>Logic now clearly distinguishes occupancy not configured vs occupied and unoccupied</li> </ul>"},{"location":"changelog/#auto-transitions","title":"Auto Transitions","text":"<ul> <li>Refreshed logic, including for undefined occupancy</li> </ul>"},{"location":"changelog/#notifications","title":"Notifications","text":"<ul> <li>Actionable Notifications set by default when Supernotify used for notification</li> <li>Advanced config in YAML can set targets for notifications, per profile or in <code>common</code> profile</li> </ul>"},{"location":"changelog/#fixes","title":"Fixes","text":"<ul> <li>Notifications now better respect which alarm states are in scope per profile</li> </ul>"},{"location":"changelog/#080","title":"0.8.0","text":""},{"location":"changelog/#notifications_1","title":"Notifications","text":"<ul> <li>All arm changes can be notified if configured</li> <li>Support for Supernotify scenarios</li> <li>Any profiles can be used now, with <code>normal</code> and <code>quiet</code> retained as defaults</li> <li>Profiles are defined by the <code>source</code>, with <code>quiet</code> defaulting to <code>button</code> and <code>panel</code> for backward compatibility</li> <li>Profiles can be further refined by listing under <code>state</code> only changes only to or from the list of states</li> <li>Notification data can have <code>source</code> and <code>profile</code> populated by adding key with null value to config</li> </ul>"},{"location":"changelog/#calendar-integration","title":"Calendar Integration","text":"<ul> <li>Calendar event matching will look anywhere in description or summary not only the start of summary</li> <li>Calendar event matching looks for alarm states constants anywhere in summary or description, for example <code>ARMED_HOME</code><ul> <li>This is in addition to any regular expression matches set up, for example <code>Trip.*</code> mapped to <code>ARMED_VACATION</code></li> </ul> </li> </ul>"},{"location":"changelog/#internal","title":"Internal","text":"<ul> <li><code>Notifier</code> and <code>AppHealthTracker</code> refactored out of main class</li> <li>Test coverage massively improved for notifications</li> </ul>"},{"location":"changelog/#071","title":"0.7.1","text":""},{"location":"changelog/#calendar-integration_1","title":"Calendar Integration","text":"<ul> <li>Better handling of changes or removal of calendar entries currently driving live alarm state</li> </ul>"},{"location":"changelog/#internal_1","title":"Internal","text":"<ul> <li>All dependencies now managed by uv and <code>pyproject.toml</code></li> </ul>"},{"location":"changelog/#070","title":"0.7.0","text":""},{"location":"changelog/#fixes_1","title":"Fixes","text":"<ul> <li>Alarm Control Panel attributes no longer overwritten</li> <li>Entity naming corrected for Home Assistant consistency, now <code>sensor.autoarm_XXXX</code> or <code>binary_sensor.autoarm_XXXX</code></li> <li>Configuration exposure moved from entity to <code>enquire_configuration</code> action, to avoid huge output to Developer states panel</li> <li>Exposed <code>reset_state</code> action</li> <li>Exposed <code>sensor.autoarm_failures</code> entity</li> <li>Home Assistant Quality Scale audited and improvements started</li> </ul>"},{"location":"changelog/#066","title":"0.6.6","text":""},{"location":"changelog/#features","title":"Features","text":"<ul> <li>New <code>reset_service</code> action available</li> <li>Delay time now available for occupancy checks, separately selectable for -&gt;<code>home</code> and -&gt;<code>not_home</code></li> </ul>"},{"location":"changelog/#internal_2","title":"Internal","text":"<ul> <li>Simplified logic for delayed actions</li> </ul>"},{"location":"changelog/#065","title":"0.6.5","text":""},{"location":"changelog/#features_1","title":"Features","text":"<ul> <li>Now exposes a <code>last_intervention</code> entity for button, mobile action or direct panel change</li> <li>Panel state now given a <code>changed_by</code> attribute value, and this now used to prevent events from changes induced by autoarm being treated as interventions</li> <li>More attributes on <code>last_calculation</code></li> <li>Logging noise reduction</li> </ul>"},{"location":"changelog/#064","title":"0.6.4","text":""},{"location":"changelog/#features_2","title":"Features","text":"<ul> <li>Now exposes a <code>last_calculation</code> entity with the key facts used</li> </ul>"},{"location":"changelog/#internal_3","title":"Internal","text":"<ul> <li>Integration tests now set up alarm panels</li> </ul>"},{"location":"changelog/#063","title":"0.6.3","text":""},{"location":"changelog/#fixes_2","title":"Fixes","text":"<ul> <li>Incorrect import from test</li> <li>Reinstate config allow extra</li> <li>Prevent exposed config entity including datetime objs, and ensure with new test</li> </ul>"},{"location":"changelog/#060","title":"0.6.0","text":""},{"location":"changelog/#features_3","title":"Features","text":"<ul> <li>Internal logic for automatic state calc replaced by regular Home Assistant conditions</li> <li>Configuration cleaned up into logical, extensible sections</li> </ul>"},{"location":"changelog/#internal_4","title":"Internal","text":"<ul> <li>All manual actions now recorded as interventions</li> <li>Regular housekeeping for interventions and calendar tracking</li> <li>Further typing with ChangeSource and AlarmControlPanelState</li> <li>Primary class documentation page</li> </ul>"},{"location":"changelog/#052","title":"0.5.2","text":"<ul> <li>Clean up dead code for mobile actions</li> </ul>"},{"location":"changelog/#051","title":"0.5.1","text":"<ul> <li>Clean up the pre-calendar bedtime config and mechanism</li> <li>Add new <code>occupied_daytime_state</code> config to allow choice, e.g. between <code>armed_home</code> and <code>disarmed</code></li> </ul>"},{"location":"changelog/#050","title":"0.5.0","text":"<ul> <li>Productionizing of private code</li> <li>Component now reloadable</li> <li>Multiple calendar integration</li> </ul>"},{"location":"known_limitations/","title":"Known Limitations","text":""},{"location":"known_limitations/#single-alarm-panel","title":"Single Alarm Panel","text":"<p>AutoArm supports only one alarm control panel per installation.</p>"},{"location":"known_limitations/#yaml-for-advanced-features","title":"YAML for Advanced Features","text":"<p>While core settings (alarm panel, calendars, persons, occupancy defaults) are managed via the UI config flow, advanced features require YAML configuration:</p> <ul> <li>Transition conditions</li> <li>Physical button mappings</li> <li>Notification profiles</li> <li>Rate limiting</li> <li>Per-calendar state pattern overrides and poll intervals</li> </ul>"},{"location":"known_limitations/#calendar-polling","title":"Calendar Polling","text":"<p>Calendar events are detected by polling, not real-time events. The default poll interval is 15 seconds per calendar. Very short calendar events (shorter than the poll interval) may be missed. This is a Home Assistant limitation, necessitated by the different styles of calendar supported, for example, Google Calendars.</p>"},{"location":"known_limitations/#manual-intervention-lock","title":"Manual Intervention Lock","text":"<p>When a manual intervention occurs (button press, mobile action, or alarm panel change), AutoArm will not override the state until the next occupancy change or another manual intervention. This is by design, but can be surprising if you expect automatic state changes to resume immediately.</p>"},{"location":"known_limitations/#alarm-panel-compatibility","title":"Alarm Panel Compatibility","text":"<p>AutoArm works with any entity that implements the <code>alarm_control_panel</code> domain. However, some panels may not support all alarm states (e.g., <code>armed_vacation</code> or <code>armed_custom_bypass</code>). AutoArm will attempt to set unsupported states, which may fail silently depending on the panel implementation.</p>"},{"location":"mobile_actions/","title":"Mobile Actions","text":"<p>AutoArm listens out for the result of Actionable Notifications with the following <code>action</code> values:</p>"},{"location":"mobile_actions/#supported-actions","title":"Supported Actions","text":"Action Key ALARM_PANEL_DISARM ALARM_PANEL_RESET ALARM_PANEL_AWAY"},{"location":"mobile_actions/#add-action-to-a-mobile-push-notification","title":"Add Action to a Mobile Push Notification","text":"<p>Here's how to send a notification to a mobile app, with a Disarm action:</p> <pre><code>action: notify.mobile_app_&lt;your_device_id_here&gt;\ndata:\n  message: \"The noisy PIR has detected the kids again\"\n  data:\n    actions:\n      - action: \"ALARM_PANEL_DISARM\" # The key you are sending for the event\n        title: \"Disarm Alarm\" # The button title\n        icon: sfsymbols:bell.slash\n</code></pre>"},{"location":"troubleshooting/","title":"Troubleshooting","text":""},{"location":"troubleshooting/#alarm-state-not-changing","title":"Alarm State Not Changing","text":"<p>Check the initialized sensor: Look at <code>binary_sensor.autoarm_initialized</code> in Developer Tools &gt; States. If it shows anything other than <code>valid</code>, there is a configuration issue.</p> <p>Check for manual intervention lock: After a manual change (button press, mobile action, panel change), AutoArm will not override the state until the next occupancy change. Use the <code>autoarm.reset_state</code> service to clear the lock.</p> <p>Check transition conditions: Open Settings &gt; System &gt; Repairs to see if any transition conditions have validation errors. Fix the conditions in your YAML configuration and reload.</p>"},{"location":"troubleshooting/#calendar-events-not-detected","title":"Calendar Events Not Detected","text":"<p>Check poll interval: Calendar events are detected by polling. If events are very short, increase the poll interval or ensure events span at least 30 seconds.</p> <p>Check state patterns: Verify that your calendar event summaries match the configured state patterns. The default patterns are <code>Away</code>, <code>Home</code>, <code>Night</code>, <code>Disarmed</code>, and <code>Vacation</code>/<code>Holiday</code>. Custom patterns use regex matching.</p> <p>Check the last calendar event sensor: Look at <code>sensor.autoarm_last_calendar_event</code> in Developer Tools &gt; States for the most recently detected event.</p>"},{"location":"troubleshooting/#notifications-not-sending","title":"Notifications Not Sending","text":"<p>Check notify profile configuration: Notifications require at least one non-common profile to match. The <code>common</code> profile only provides base configuration (service, data) that is merged into matched profiles, with default <code>silent</code> and <code>normal</code> profiles created if no explicit ones given.</p> <p>Check the service name: Ensure the notify service exists. The <code>notify.</code> prefix is stripped automatically, so <code>notify.mobile_app</code> becomes a call to the <code>mobile_app</code> service in the <code>notify</code> domain.</p>"},{"location":"troubleshooting/#repair-issues","title":"Repair Issues","text":"<p>AutoArm uses the Home Assistant repair system to report configuration problems:</p> <ul> <li>Invalid Transition Condition: A transition condition template failed validation. Check the condition syntax in your YAML.</li> <li>YAML core configuration is deprecated: Core settings have been migrated to the UI config entry. Remove the migrated keys from YAML (see the Migration Guide).</li> </ul>"},{"location":"troubleshooting/#reload-after-yaml-changes","title":"Reload After YAML Changes","text":"<p>After modifying YAML configuration (transitions, buttons, notify, etc.), call the <code>autoarm.reload</code> service or restart Home Assistant for changes to take effect.</p>"},{"location":"troubleshooting/#debug-logging","title":"Debug Logging","text":"<p>Enable debug logging for AutoArm to see detailed operation logs:</p> <pre><code>logger:\n  logs:\n    custom_components.autoarm: debug\n</code></pre> <p>All AutoArm log messages use the <code>AUTOARM</code> prefix for easy filtering.</p>"},{"location":"configuration/create_calendar/","title":"Create a Calendar","text":"<p>This How To will show you how to create a new calendar dedicated for controlling alarm control panel state. This is one way of using AutoArm, you can choose to use other types of calendars, reuse events from existing calendars, or mix-n-match.</p>"},{"location":"configuration/create_calendar/#add-a-local-calendar","title":"Add a Local Calendar","text":"<p>Use the button, or follow the manual steps:</p> <p> </p> <ol> <li>From the Settings | Integration screen, choose Add Integration.</li> <li>From this dialogue, choose Local Calendar </li> <li>Configure the integration by choosing its name </li> </ol>"},{"location":"configuration/create_calendar/#configure-autoarm","title":"Configure AutoArm","text":"<p>UI and YAML split</p> <p>Calendar entities and <code>no_event_mode</code> are now configured via the AutoArm Options UI. Per-calendar <code>state_patterns</code> and <code>poll_interval</code> remain in YAML.</p> <p>Select the calendar entity in Settings &gt; Devices &amp; Services &gt; AutoArm &gt; Configure.</p> <p>Then add the per-calendar details in YAML, in this example <code>Alarm Control</code> is the name of the calendar:</p> <pre><code>autoarm:\n    calendar_control:\n      calendars:\n        - entity_id: calendar.alarm_control\n          state_patterns:\n              disarmed: Disarmed\n</code></pre> <p>This calendar is going to be used very simply to disarm the alarm during set periods, and let AutoArm automatically handle the other times.</p>"},{"location":"configuration/create_calendar/#access-the-calendar","title":"Access the Calendar","text":"<p>If you don't have a Calendar option in the Home Assistant side-bar, then go to the personal settings ( bottom left corner, with your name against it) and change the visibility as:</p> <p></p>"},{"location":"configuration/create_calendar/#setup-a-disarm-schedule","title":"Setup a Disarm Schedule","text":"<p>Now that you have access to the calendar screen, add a recurring event for disarming.</p> <p></p>"},{"location":"configuration/create_calendar/#changing-your-mind","title":"Changing your Mind","text":"<p>Once the event is created, double-click on a day to change it. You get the choice of changing just that day or all the recurring entries. Similarly you can delete one day from a recurring entry without affecting all the other ones. This makes it easy to do some one-off tuning for some days.</p>"},{"location":"configuration/create_calendar/#adding-vacations","title":"Adding Vacations","text":"<p>You may have vacation events already on another calendar integration ( like Remote or Google Calendar ), or may want to add them to this one.</p> <p>Here's how that might look:</p> <pre><code>autoarm:\n    calendar_control:\n      - entity_id: calendar.alarm_control\n        state_patterns:\n            disarmed: Disarmed\n      - entity_id: calendar.family_happenings\n        state_patterns:\n            armed_vacation:\n              - Camping Trip.*\n              - .*Holidays.*\n            armed_away:\n              - Work Trip.*\n</code></pre>"},{"location":"configuration/create_calendar/#what-to-do-when-no-event","title":"What to do when no event","text":"<p>While a calendar could have events covering every minute of every day, its much less work to only define what is needed, such as what's the right time to arm at night, or when vacations start and end.</p> <p><code>no_event_mode</code> allows control over what happens when there's no calendar event, and nothing else to determine alarm state. This is configurable via the AutoArm Options UI. It can be:</p> <p><code>auto</code> - Will make best guess, including checking what the alarm panel was before the event <code>manual</code> - No state changes made when calendar event ends <code>disarmed</code>,<code>armed_away</code> etc - Use any of the standard Alarm Control Panel states as a fixed default</p>"},{"location":"configuration/create_panel/","title":"Create an Alarm Panel","text":"<p>If you don't already have an alarm panel, set up a default manual as below, which creates the state machine for armed/disarmed status. This is all you need in the way of alarm support for AutoArm to function.</p> <p>You can also choose whether a PIN code is needed or not to arm or disarm. AutoArm has its own delay time handling for buttons, so recommended to keep the times at zero if not needed for any other purposes.</p> <pre><code>alarm_control_panel:\n  - platform: manual\n    name: Home Alarm Control\n    code_arm_required: false\n    arming_time: 0\n    delay_time: 0\n    disarm_after_trigger: false\n    trigger_time: 0\n</code></pre>"},{"location":"configuration/create_panel/#selecting-the-alarm-panel-in-autoarm","title":"Selecting the Alarm Panel in AutoArm","text":"<p>The alarm panel entity is selected during the AutoArm UI config flow. Go to Settings &gt; Devices &amp; Services &gt; Add Integration, search for AutoArm, and select your alarm panel entity in the first step.</p>"},{"location":"configuration/create_panel/#legacy-yaml-reference","title":"Legacy YAML Reference","text":"<p>Before the UI config flow, the alarm panel was specified in YAML. This is still supported for auto-migration, but new installations should use the UI.</p> <pre><code>autoarm:\n  alarm_panel:\n    entity_id: alarm_panel.home_alarm_control\n</code></pre>"},{"location":"configuration/migration/","title":"Migration Guide","text":""},{"location":"configuration/migration/#what-changed","title":"What Changed","text":"<p>AutoArm now uses a hybrid configuration model. Core settings are managed through the Home Assistant UI via a config flow, while advanced features remain in YAML.</p> <p>Existing YAML-only installations are automatically migrated to a config entry on restart. No manual action is required.</p>"},{"location":"configuration/migration/#what-moves-where","title":"What Moves Where","text":"Setting Before After <code>alarm_panel.entity_id</code> YAML UI (set during config flow setup) <code>calendar_control.calendars[].entity_id</code> YAML UI (Options) <code>calendar_control.no_event_mode</code> YAML UI (Options) <code>occupancy.entity_id</code> YAML UI (Options) <code>occupancy.default_state.day</code> YAML UI (Options) <code>occupancy.default_state.night</code> YAML UI (Options) <code>diurnal</code> YAML UI (Options) <code>calendar_control.calendars[].state_patterns</code> YAML YAML (unchanged) <code>calendar_control.calendars[].poll_interval</code> YAML YAML (unchanged) <code>transitions</code> YAML YAML (unchanged) <code>buttons</code> YAML YAML (unchanged) <code>notify</code> YAML Profiles in YAML (unchanged), Service in UI (Options) <code>rate_limit</code> YAML YAML (unchanged) <code>occupancy.delay_time</code> YAML YAML (unchanged)"},{"location":"configuration/migration/#auto-migration","title":"Auto-Migration","text":"<p>On restart, if AutoArm finds a YAML configuration without a matching config entry, it automatically:</p> <ol> <li>Creates a config entry with the alarm panel entity from YAML</li> <li>Populates options with calendar entities, person entities, occupancy defaults, and no-event mode from YAML</li> <li>Continues to read advanced settings (transitions, buttons, notification profiles, etc.) from YAML</li> </ol>"},{"location":"configuration/migration/#cleaning-up-yaml-after-migration","title":"Cleaning Up YAML After Migration","text":"<p>After migration, the following YAML keys are read from the config entry and can be removed from your YAML configuration:</p> <ul> <li><code>alarm_panel.entity_id</code></li> <li><code>occupancy.entity_id</code></li> <li><code>occupancy.default_state</code></li> <li><code>calendar_control.no_event_mode</code></li> <li>Calendar <code>entity_id</code> values (the entity list is managed in Options)</li> </ul> <p>The remaining YAML sections (<code>transitions</code>, <code>buttons</code>, <code>notify</code>, <code>rate_limit</code>, per-calendar <code>state_patterns</code> and <code>poll_interval</code>) should be kept.</p>"},{"location":"configuration/migration/#coexisting-configurations","title":"Coexisting Configurations","text":"<p>If both a YAML configuration and a config entry exist, AutoArm raises a repair issue to alert you. The config entry takes precedence for the migrated settings, while YAML continues to provide advanced configuration.</p>"},{"location":"configuration/removal/","title":"Removing AutoArm","text":""},{"location":"configuration/removal/#via-hacs","title":"Via HACS","text":"<ol> <li>Open HACS in your Home Assistant instance</li> <li>Navigate to Integrations</li> <li>Find AutoArm and click on it</li> <li>Click the three-dot menu and select Remove</li> <li>Restart Home Assistant</li> </ol>"},{"location":"configuration/removal/#manual-removal","title":"Manual Removal","text":"<ol> <li>Delete the <code>custom_components/autoarm</code> directory</li> <li>Remove the <code>autoarm:</code> section from your <code>configuration.yaml</code> if present</li> <li>Restart Home Assistant</li> </ol>"},{"location":"configuration/removal/#cleaning-up","title":"Cleaning Up","text":"<p>After removal, you may also want to:</p> <ul> <li>Delete any AutoArm-related automations or scripts you created</li> <li>Remove mobile notification actions configured for AutoArm</li> <li>Remove any calendar entities that were created solely for AutoArm scheduling</li> </ul>"},{"location":"configuration/examples/minimal/","title":"Minimal Configuration","text":"<p>The simplest way to set up AutoArm is through the UI: go to Settings &gt; Devices &amp; Services &gt; Add Integration, search for AutoArm, and select your alarm panel. No YAML is needed for a basic setup.</p>"},{"location":"configuration/examples/minimal/#legacy-yaml-reference","title":"Legacy YAML Reference","text":"<p>For reference, the equivalent YAML-only configuration lives inside <code>config.yaml</code> or an include file set up for the <code>autoarm</code> domain.</p> <pre><code>\n</code></pre>"},{"location":"configuration/examples/typical/","title":"Typical Configuration","text":"<p>More extensive example configuration, using most of the features.</p>"},{"location":"configuration/examples/typical/#ui-vs-yaml-settings","title":"UI vs YAML Settings","text":"<p>With the config flow, some settings are now managed in the UI:</p> Setting Where Notes Alarm panel entity UI (setup) Selected when adding the integration Calendar entities UI (options) Which calendars to use Person entities UI (options) Which persons to track for occupancy Occupancy day/night defaults UI (options) Default alarm state when occupied No-event mode UI (options) Behaviour when no calendar event is active Diurnal UI (options) Sunrise/sunset configuration Per-calendar state patterns YAML Regex patterns matching calendar events to alarm states Per-calendar poll interval YAML How often to check each calendar Transitions YAML Condition templates for state transitions Buttons YAML Physical button entity mappings Notifications UI (options) Notification service and targets Notification Profiles YAML Notification profile configuration Rate limit YAML Throttling for arm calls"},{"location":"configuration/examples/typical/#full-yaml-example","title":"Full YAML Example","text":"<pre><code>autoarm:\n  # YAML: delay_time remains YAML-only\n  occupancy:\n    delay_time:\n      not_home: 180\n      home: 0 # the default\n  # YAML-only: transition conditions\n  transitions:\n    armed_home:\n      alias: Home with alarm active, such as home alone\n      conditions:\n        - \"{{ autoarm.occupied and not autoarm.night }}\"\n        - \"{{ autoarm.computed and autoarm.occupied_daytime_state == 'armed_home'}}\"\n    armed_away:\n      conditions: \"{{ not autoarm.occupied and autoarm.computed}}\"\n    disarmed:\n      conditions:\n       - \"{{ autoarm.occupied and not autoarm.night }}\"\n       - \"{{ autoarm.computed and autoarm.occupied_daytime_state == 'disarmed'}}\"\n    armed_night:\n      conditions: \"{{ autoarm.occupied and autoarm.night and autoarm.computed }}\"\n    pending:\n      conditions:\n  # UI: calendar entities and no_event_mode are configurable via Options\n  # YAML: per-calendar state_patterns and poll_interval remain here\n  calendar_control:\n    calendars:\n      - entity_id: calendar.alarm_control\n        alias: Local Calendar only used for autoarm\n        poll_interval: 60\n        state_patterns:\n          disarmed:\n            - Disarmed\n      - entity_id: calendar.family_events\n        poll_interval: 300\n        state_patterns:\n          armed_vacation:\n            - Holiday.*\n            - Camping Trip.*\n          armed_away:\n            - Working at Office\n\n  # YAML-only: button configuration\n  buttons:\n    reset:\n      entity_id: binary_sensor.button_right\n    armed_away:\n      delay_time: 180\n      entity_id:\n        - binary_sensor.button_right\n        - binary_sensor.back_door_away\n    disarmed:\n      entity_id: binary_sensor.button_middle\n\n  # YAML-only: rate limiting\n  rate_limit:\n    max_calls: 5\n    period: 60\n\n  # YAML-only: notification configuration\n  notify:\n    common:\n      data:\n        actions:\n          - action: ALARM_PANEL_DISARM\n            title: Disarm Alarm Panel\n            icon: sfsymbols:bell.slash\n          - action: ALARM_PANEL_RESET\n            title: Reset Alarm Panel\n            icon: sfsymbols:bell\n          - action: ALARM_PANEL_AWAY\n            title: Arm Alarm Panel for Going Away\n            icon: sfsymbols:airplane\n    quiet:\n      scenario: alarm_panel_quiet\n      data:\n        priority: low\n    normal:\n      scenario: alarm_panel\n      source:\n        - calendar\n      state:\n        - armed_away\n        - armed_vacation\n      data:\n        priority: medium\n</code></pre>"},{"location":"developer/primary_classes/","title":"Primary Classes","text":"","tags":["developer"]},{"location":"developer/primary_classes/#automation","title":"Automation","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource","title":"<code>custom_components.autoarm.const.ChangeSource</code>","text":"<p>               Bases: <code>StrEnum</code></p> <p>Enumeration of all the known ways to trigger a state change</p> <p>Attributes:</p> Name Type Description <code>ACTION</code> <code>ALARM_PANEL</code> <code>BUTTON</code> <code>CALENDAR</code> <code>MOBILE</code> <code>OCCUPANCY</code> <code>STARTUP</code> <code>SUNRISE</code> <code>SUNSET</code> <code>ZOMBIFICATION</code>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.ACTION","title":"<code>ACTION = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.ALARM_PANEL","title":"<code>ALARM_PANEL = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.BUTTON","title":"<code>BUTTON = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.CALENDAR","title":"<code>CALENDAR = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.MOBILE","title":"<code>MOBILE = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.OCCUPANCY","title":"<code>OCCUPANCY = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.STARTUP","title":"<code>STARTUP = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.SUNRISE","title":"<code>SUNRISE = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.SUNSET","title":"<code>SUNSET = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ChangeSource.ZOMBIFICATION","title":"<code>ZOMBIFICATION = auto()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.autoarming.Intervention","title":"<code>custom_components.autoarm.autoarming.Intervention</code>  <code>dataclass</code>","text":"<p>Record of a manual intervention, such as a button push, mobile action or alarm panel change</p>","tags":["developer"]},{"location":"developer/primary_classes/#conditions","title":"Conditions","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ConditionVariables","title":"<code>custom_components.autoarm.const.ConditionVariables(occupied, unoccupied, night, state, occupied_defaults, calendar_event=None, at_home=None, not_home=None)</code>  <code>dataclass</code>","text":"<p>Field with sub-fields added to the template context of Transition Conditions</p> <p>Methods:</p> Name Description <code>as_dict</code> <p>Generate the field to be exposed in the context, stringifying alarm states</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.const.ConditionVariables.as_dict","title":"<code>as_dict()</code>","text":"<p>Generate the field to be exposed in the context, stringifying alarm states</p>","tags":["developer"]},{"location":"developer/primary_classes/#calendar","title":"Calendar","text":"","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendar","title":"<code>custom_components.autoarm.calendar.TrackedCalendar</code>","text":"<p>Listener for a Home Assistant Calendar</p> <p>Methods:</p> Name Description <code>active_events</code> <p>List all the events matching a state pattern that are currently open</p> <code>has_active_event</code> <p>Is there any event matching a state pattern that is currently open</p> <code>match_events</code> <p>Query the calendar for events that match state patterns</p> <code>on_timed_poll</code> <p>Check for new and dead events, entry point for the timed calendar tracker listener</p> <code>prune_events</code> <p>Remove past events</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendar.active_events","title":"<code>active_events()</code>","text":"<p>List all the events matching a state pattern that are currently open</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendar.has_active_event","title":"<code>has_active_event()</code>","text":"<p>Is there any event matching a state pattern that is currently open</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendar.match_events","title":"<code>match_events()</code>  <code>async</code>","text":"<p>Query the calendar for events that match state patterns</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendar.on_timed_poll","title":"<code>on_timed_poll(_called_time)</code>  <code>async</code>","text":"<p>Check for new and dead events, entry point for the timed calendar tracker listener</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendar.prune_events","title":"<code>prune_events()</code>  <code>async</code>","text":"<p>Remove past events</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendarEvent","title":"<code>custom_components.autoarm.calendar.TrackedCalendarEvent</code>","text":"<p>Generate alarm state changes for a Home Assistant Calendar event</p> <p>Methods:</p> Name Description <code>__eq__</code> <p>Compare two events based on underlying calendar event</p> <code>end</code> <p>Handle an event that has reached its finish date and time</p> <code>event_id</code> <p>Generate an ID for the calendar even if it doesn't natively support <code>uid</code></p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendarEvent.__eq__","title":"<code>__eq__(other)</code>","text":"<p>Compare two events based on underlying calendar event</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendarEvent.end","title":"<code>end(event_time)</code>  <code>async</code>","text":"<p>Handle an event that has reached its finish date and time</p>","tags":["developer"]},{"location":"developer/primary_classes/#custom_components.autoarm.calendar.TrackedCalendarEvent.event_id","title":"<code>event_id(calendar_id, event)</code>  <code>classmethod</code>","text":"<p>Generate an ID for the calendar even if it doesn't natively support <code>uid</code></p>","tags":["developer"]},{"location":"developer/quality_scale_audit/","title":"Home Assistant Quality Scale Audit","text":"<p>This document provides a comprehensive audit of the AutoArm integration against the Home Assistant Integration Quality Scale.</p> <p>Audit Date: February 2026 Integration Version: 1.0.0 Auditor: Automated analysis</p>"},{"location":"developer/quality_scale_audit/#summary","title":"Summary","text":"Tier Done Exempt Todo Total Bronze 16 3 0 19 Silver 7 4 0 11 Gold 10 7 4 21 Platinum 1 1 1 3 Total 34 15 5 54 <p>Current Tier Achievement: Silver (with most Gold requirements met)</p> <p>Path to Gold: Complete <code>entity-category</code>, <code>entity-device-class</code>, <code>entity-translations</code>, and <code>icon-translations</code> rules (requires refactoring to entity classes).</p>"},{"location":"developer/quality_scale_audit/#bronze-tier","title":"Bronze Tier","text":"<p>The Bronze tier represents the baseline standard for all integrations.</p>"},{"location":"developer/quality_scale_audit/#completed-rules","title":"Completed Rules","text":"Rule Status Notes <code>action-setup</code> Done Services registered in <code>async_setup</code> (autoarming.py) <code>brands</code> Done Brand assets submitted and approved in the HA brands repository <code>common-modules</code> Done Logic separated into <code>const.py</code>, <code>helpers.py</code>, <code>hass_api.py</code>, <code>calendar.py</code> <code>config-flow</code> Done UI config flow for alarm panel, calendars, persons, and occupancy defaults <code>config-flow-test-coverage</code> Done Config flow and options flow covered by tests <code>dependency-transparency</code> Done All dependencies are standard HA components declared in <code>manifest.json</code> <code>docs-actions</code> Done Services documented in <code>services.yaml</code> and README <code>docs-high-level-description</code> Done Clear overview in README.md <code>docs-installation-instructions</code> Done HACS installation documented <code>docs-removal-instructions</code> Done Removal instructions in <code>docs/removal.md</code> <code>entity-event-setup</code> Done Events subscribed in <code>initialize_*</code> methods using proper HA tracking functions <code>runtime-data</code> Done Uses <code>HassKey[AutoArmData]</code> for typed runtime data storage <code>test-before-configure</code> Done Config flow validates entity selections; YAML validated via voluptuous <code>test-before-setup</code> Done Validates config via voluptuous schemas; <code>ConfigEntryNotReady</code> on init failure; raises repair issues for invalid transitions <code>unique-config-entry</code> Done Unique ID set to domain; <code>_abort_if_unique_id_configured()</code> prevents duplicates"},{"location":"developer/quality_scale_audit/#exempt-rules","title":"Exempt Rules","text":"Rule Status Reason <code>appropriate-polling</code> Exempt Event-driven integration; calendar polling is configurable <code>entity-unique-id</code> Exempt Uses fixed entity IDs for integration-scoped singletons <code>has-entity-name</code> Exempt Entities created via <code>async_set</code>, not entity classes"},{"location":"developer/quality_scale_audit/#silver-tier","title":"Silver Tier","text":"<p>The Silver tier focuses on reliability and robustness.</p>"},{"location":"developer/quality_scale_audit/#completed-rules_1","title":"Completed Rules","text":"Rule Status Notes <code>action-exceptions</code> Done Service handlers raise <code>HomeAssistantError</code> on failure <code>config-entry-unloading</code> Done <code>shutdown()</code> method properly cleans up all listeners <code>docs-configuration-parameters</code> Done Parameters documented in <code>automated_arming.md</code> and examples <code>entity-unavailable</code> Done Entities initialized to \"unavailable\" when appropriate <code>integration-owner</code> Done @jeyrb declared as code owner <code>log-when-unavailable</code> Done Consistent \"AUTOARM\" prefix; appropriate log levels <code>test-coverage</code> Done Test coverage &gt;90% with <code>--cov-fail-under=90</code> enforced"},{"location":"developer/quality_scale_audit/#exempt-rules_1","title":"Exempt Rules","text":"Rule Status Reason <code>docs-installation-parameters</code> Exempt Config flow parameters are self-descriptive entity selectors <code>parallel-updates</code> Exempt No parallel device polling <code>reauthentication-flow</code> Exempt No authentication required"},{"location":"developer/quality_scale_audit/#gold-tier","title":"Gold Tier","text":"<p>The Gold tier represents best-in-class user experience.</p>"},{"location":"developer/quality_scale_audit/#completed-rules_2","title":"Completed Rules","text":"Rule Status Notes <code>diagnostics</code> Done <code>diagnostics.py</code> exposes entry data, options, YAML keys, and armer state <code>docs-data-update</code> Done Update mechanisms documented (events, polling, manual triggers) <code>docs-examples</code> Done Example configs in <code>docs/configuration/examples/</code> <code>docs-known-limitations</code> Done Limitations documented in <code>docs/known_limitations.md</code> <code>docs-supported-functions</code> Done All features documented in README and automated_arming.md <code>docs-troubleshooting</code> Done Troubleshooting guide in <code>docs/troubleshooting.md</code> <code>docs-use-cases</code> Done Use cases illustrated in \"Why use alarm control panels?\" section <code>exception-translations</code> Done Issue messages use translation keys with placeholders <code>reconfiguration-flow</code> Done Options flow allows reconfiguring calendars, persons, occupancy defaults, and no-event mode <code>repair-issues</code> Done Raises repair issues for invalid transition conditions"},{"location":"developer/quality_scale_audit/#exempt-rules_2","title":"Exempt Rules","text":"Rule Status Reason <code>devices</code> Exempt Orchestrates existing entities; doesn't represent physical devices <code>discovery</code> Exempt User-configured entities; nothing to discover <code>discovery-update-info</code> Exempt No discovery <code>docs-supported-devices</code> Exempt Works with any compatible HA entities <code>dynamic-devices</code> Exempt No device registry usage <code>entity-disabled-by-default</code> Exempt All entities are essential <code>stale-devices</code> Exempt No device registry usage"},{"location":"developer/quality_scale_audit/#todo-rules","title":"Todo Rules","text":"Rule Status Action Required <code>entity-category</code> Todo Add EntityCategory if refactored to entity classes <code>entity-device-class</code> Todo Add device classes (e.g., diagnostic for initialized sensor) <code>entity-translations</code> Todo Refactor to use translation keys for entity names <code>icon-translations</code> Todo Implement icon translations"},{"location":"developer/quality_scale_audit/#platinum-tier","title":"Platinum Tier","text":"<p>The Platinum tier represents technical excellence.</p>"},{"location":"developer/quality_scale_audit/#completed-rules_3","title":"Completed Rules","text":"Rule Status Notes <code>async-dependency</code> Done No external dependencies; fully async using HA APIs"},{"location":"developer/quality_scale_audit/#exempt-rules_3","title":"Exempt Rules","text":"Rule Status Reason <code>inject-websession</code> Exempt No external HTTP calls"},{"location":"developer/quality_scale_audit/#in-progress","title":"In Progress","text":"Rule Status Notes <code>strict-typing</code> In Progress <code>py.typed</code> marker present; some <code>Any</code> types remain due to HA ConfigType patterns"},{"location":"developer/quality_scale_audit/#remaining-work","title":"Remaining Work","text":""},{"location":"developer/quality_scale_audit/#gold-tier-requires-entity-class-refactoring","title":"Gold Tier (requires entity class refactoring)","text":"<p>These four rules all require migrating from <code>hass.states.async_set()</code> to proper HA entity classes:</p> <ol> <li><code>entity-category</code>: Add <code>EntityCategory.DIAGNOSTIC</code> to status sensors</li> <li><code>entity-device-class</code>: Add device classes to binary sensors and sensors</li> <li><code>entity-translations</code>: Use translation keys for entity names</li> <li><code>icon-translations</code>: Add icon translations</li> </ol>"},{"location":"developer/quality_scale_audit/#platinum-tier_1","title":"Platinum Tier","text":"<ol> <li><code>strict-typing</code>: Eliminate remaining <code>Any</code> types where possible</li> </ol>"},{"location":"developer/quality_scale_audit/#code-quality-notes","title":"Code Quality Notes","text":""},{"location":"developer/quality_scale_audit/#strengths","title":"Strengths","text":"<ul> <li>Clean separation of concerns across modules</li> <li>Comprehensive error tracking via <code>failures</code> counter and repair issues</li> <li>Rate limiting prevents arming loops</li> <li>Proper async/await throughout</li> <li>Good test coverage (&gt;90%) for core functionality</li> <li>Consistent logging with \"AUTOARM\" prefix</li> <li>Support for graceful shutdown and reload</li> <li>Diagnostics support for debugging</li> </ul>"},{"location":"developer/quality_scale_audit/#areas-for-improvement","title":"Areas for Improvement","text":"<ul> <li>Some methods in <code>autoarming.py</code> are lengthy and could be refactored</li> <li>A few <code>Any</code> type hints remain that could be more specific</li> <li>Entities use <code>async_set</code> directly rather than entity classes</li> </ul>"},{"location":"developer/quality_scale_audit/#references","title":"References","text":"<ul> <li>Home Assistant Integration Quality Scale</li> <li>Quality Scale Rules</li> <li>Home Assistant Brands Repository</li> </ul>"},{"location":"developer/coverage/","title":"Coverage","text":""}]}