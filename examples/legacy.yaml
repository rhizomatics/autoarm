autoarm:
  # UI: alarm_panel entity is selected during config flow setup
  alarm_panel:
    alias: Virtual control panel using Manual Alarm Control Panel integration
    entity_id: alarm_control_panel.testing
  # UI: person entities and default_state are configurable via Options
  # YAML: delay_time remains YAML-only
  occupancy:
    entity_id:
      - person.house_owner
      - person.tenant
    default_state:
      day: disarmed
      night: armed_night
    delay_time:
      not_home: 180
  # YAML-only: sunrise/sunset configuration
  diurnal:
    sunrise:
      earliest: "06:30:00"
  # YAML-only: transition conditions
  transitions:
    armed_home:
      alias: Home with alarm active, such as home alone
      conditions:
        - "{{ autoarm.occupied and not autoarm.night }}"
        - "{{ autoarm.computed and autoarm.occupied_daytime_state == 'armed_home'}}"
    armed_away:
      conditions: "{{ not autoarm.occupied and autoarm.computed}}"
    disarmed:
      conditions:
       - "{{ autoarm.occupied and not autoarm.night }}"
       - "{{ autoarm.computed and autoarm.occupied_daytime_state == 'disarmed'}}"
    armed_night:
      conditions: "{{ autoarm.occupied and autoarm.night and autoarm.computed }}"
    pending:
      conditions:
  # UI: calendar entities and no_event_mode are configurable via Options
  # YAML: per-calendar state_patterns and poll_interval remain here
  calendar_control:
    no_event_mode: auto
    calendars:
      - entity_id: calendar.alarm_control
        alias: Local Calendar only used for autoarm
        poll_interval: 60
        state_patterns:
          disarmed:
            - Disarmed
      - entity_id: calendar.family_events
        poll_interval: 300
        state_patterns:
          armed_vacation:
            - Holiday.*
            - Camping Trip.*
          armed_away:
            - Working at Office

  # YAML-only: button configuration
  buttons:
    reset:
      entity_id: binary_sensor.button_right
    armed_away:
      delay_time: 180
      entity_id:
        - binary_sensor.button_right
        - binary_sensor.back_door_away
    disarmed:
      entity_id: binary_sensor.button_middle

  # YAML-only: rate limiting
  rate_limit:
    max_calls: 5
    period: 60

  # YAML-only: notification configuration
  notify:
    common:
      service: notify.supernotify
      supernotify: true
      data:
        actions:
          - action: ALARM_PANEL_DISARM
            title: Disarm Alarm Panel
            icon: sfsymbols:bell.slash
          - action: ALARM_PANEL_RESET
            title: Reset Alarm Panel
            icon: sfsymbols:bell
          - action: ALARM_PANEL_AWAY
            title: Arm Alarm Panel for Going Away
            icon: sfsymbols:airplane
    quiet:
      scenario: alarm_panel_quiet
      data:
        priority: low
    normal:
      scenario: alarm_panel
      source:
        - calendar
      state:
        - armed_away
        - armed_vacation
      data:
        priority: medium
